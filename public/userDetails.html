<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User profile</title>
      <link rel="icon" type="image/png" href="logo.png">

    <style>
body {
    font-family: "Segoe UI", "Times New Roman", Times, serif;
    background: linear-gradient(120deg, #a8e6cf 0%, #43cea2 100%);
    margin: 0;
    padding: 0;
    min-height: 100vh;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: background 0.6s;
}

.container {
    background: rgba(255, 255, 255, 0.96);
    backdrop-filter: blur(14px);
    border-radius: 24px;
    padding: 48px 32px 40px;
    box-shadow: 0 12px 36px 8px rgba(68, 160, 141, 0.12), 0 2px 12px 0 rgba(51,51,51,0.05);
    max-width: 420px;
    width: 96%;
    text-align: center;
    border: 1.5px solid rgba(168, 230, 207, 0.32);
    position: relative;
}

.loading {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 12px;
    color: #369f61;
    font-size: 19px;
    font-family: 'Segoe UI', serif;
    letter-spacing: 1px;
}

.spinner {
    width: 28px;
    height: 28px;
    border: 3px solid #a8e6cf;
    border-top: 3px solid #44a08d;
    border-radius: 50%;
    animation: spin 0.85s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg);}
    100% { transform: rotate(360deg);}
}

/* animation */
.user-info {
    display: none;
}
.user-info.show {
    display: block;
    animation: fadeIn 0.7s ease;
}
@keyframes fadeIn {
    0% { opacity: 0; transform: translateY(24px);}
    100% { opacity: 1; transform: translateY(0);}
}

.user-avatar {
    width: 102px;
    height: 102px;
    border-radius: 50%;
    margin: -48px auto 22px;
    background: linear-gradient(135deg, #43cea2, #185a9d 85%);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 40px;
    color: white;
    font-weight: bold;
    box-shadow: 0 6px 20px 0 rgba(68, 160, 141, 0.23), 0 1.5px 8px 0 rgba(51,51,51,0.08);
    border: 4px solid #fff;
}

.user-name {
    font-size: 27px;
    font-weight: 700;
    color: #185a9d;
    margin-bottom: 10px;
    letter-spacing: 0.5px;
}

.user-email {
    font-size: 15px;
    color: #32967f;
    margin-bottom: 22px;
    padding: 11px 19px;
    background: rgba(68, 205, 196, 0.13);
    border-radius: 20px;
    border: 1px solid rgba(68, 205, 196,0.18);
    display: inline-block;
    transition: background 0.3s;
}

/* extra smooth card-area for details */
.user-details {
    margin-top: 25px;
    padding: 20px 22px 18px 16px;
    background: rgba(67, 206, 162, 0.09);
    border-radius: 13px;
    border-left: 6px solid #185a9d;
    box-shadow: 0 3px 10px 0 rgba(67, 206, 162, 0.07);
}

.detail-item {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 14px;
    padding: 10px 0;
    border-bottom: 1px solid rgba(67, 206, 162, 0.18);
}
.detail-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.detail-label {
    font-weight: 600;
    color: #369f61;
    font-size: 15px;
}

.detail-value {
    color: #155176;
    font-size: 15px;
    font-family: 'Segoe UI', sans-serif;
}

/* Error & info states */
.error-message {
    display: none;
    color: #dc257d;
    background: linear-gradient(90deg, rgba(220,37,125,0.08),rgba(255,255,255,0.06));
    padding: 18px;
    border-radius: 10px;
    border: 1.2px solid rgba(220, 37, 125, 0.2);
    margin-bottom: 18px;
}

.no-user {
    display: none;
    color: #856404;
    background: linear-gradient(90deg, #fff4cf88, #fffbea80);
    padding: 19px 15px;
    border-radius: 10px;
    border: 1px solid #ffe082aa;
    margin-bottom: 18px;
}

/* Action button */
.logout-btn {
    margin-top: 32px;
    padding: 13px 30px;
    background: linear-gradient(90deg,#32967f 0%,#185a9d 100%);
    color: white;
    border: none;
    border-radius: 26px;
    font-size: 17px;
    font-family: 'Segoe UI', "Times New Roman", Times, serif;
    font-weight: 700;
    cursor: pointer;
    letter-spacing: 1px;
    transition: background 0.3s, box-shadow 0.2s, transform 0.18s;
    box-shadow: 0 2px 10px rgba(24, 90, 157, 0.11);
}

.logout-btn:hover {
    background: linear-gradient(90deg,#dc3545 0%,#ea868f 100%);
    transform: translateY(-4px) scale(1.05);
    box-shadow: 0 6px 22px rgba(220, 53, 69, 0.17);
}

   </style>
</head>
<body>
      <div class="logo-container">
    <img src="logo.png" alt="Logo" class="logo" />
    <div class="logo-text">DocsToSheets<sup></sup></div>
  </div>
    <div class="container">
        <div id="loading" class="loading">
            <div class="spinner"></div>
            <span>Loading user information...</span>
        </div>
        
        <div id="userInfo" class="user-info">
            <div class="user-avatar" id="userAvatar"></div>
            <div class="user-name" id="userName"></div>
            <div class="user-email" id="userEmail"></div>
            <div class="user-details">
                <div class="detail-item">
                    <span class="detail-label">Email Verified:</span>
                    <span class="detail-value" id="emailVerified"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Account Created:</span>
                    <span class="detail-value" id="createdAt"></span>
                </div>
                <div class="detail-item">
                    <span class="detail-label">Last Sign In:</span>
                    <span class="detail-value" id="lastSignIn"></span>
                </div>
    <div class="user-details"></div>
       <a href="index.html"><button id="logoutButton" class="logout-btn">Logout</button></a>
    </div>
            </div>
        </div>
        
        <div id="errorMessage" class="error-message">
            <h3>Error Loading User Data</h3>
            <p id="errorText"></p>
        </div>
        
        <div id="noUser" class="no-user">
            <h3>No User Logged In</h3>
            <p>Please log in to view your profile information.</p>
        </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.0/firebase-app-compat.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/firebase/9.22.0/firebase-auth-compat.min.js"></script>

    <script>
        // Firebase configuration - Replace with your Firebase config
      const firebaseConfig = {
    apiKey: "AIzaSyDRMijbushB_IBNn5xcfHN3UsbJC9TN6Kc",
    authDomain: "docstosheets-803e7.firebaseapp.com",
    projectId: "docstosheets-803e7",
    storageBucket: "docstosheets-803e7.appspot.com",
    messagingSenderId: "729328747721",
    appId: "1:729328747721:web:149c3fff759c4bf7c77918"
  };


        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // DOM elements
        const loading = document.getElementById('loading');
        const userInfo = document.getElementById('userInfo');
        const errorMessage = document.getElementById('errorMessage');
        const noUser = document.getElementById('noUser');
        
        const userAvatar = document.getElementById('userAvatar');
        const userName = document.getElementById('userName');
        const userEmail = document.getElementById('userEmail');
        const userId = document.getElementById('userId');
        const emailVerified = document.getElementById('emailVerified');
        const createdAt = document.getElementById('createdAt');
        const lastSignIn = document.getElementById('lastSignIn');

        // Function to show error
        function showError(message) {
            loading.style.display = 'none';
            userInfo.classList.remove('show');
            noUser.style.display = 'none';
            errorMessage.style.display = 'block';
            document.getElementById('errorText').textContent = message;
        }

        // Function to show no user state
        function showNoUser() {
            loading.style.display = 'none';
            userInfo.classList.remove('show');
            errorMessage.style.display = 'none';
            noUser.style.display = 'block';
        }

        // Function to display user information
        function displayUserInfo(user) {
            try {
                // Get user's initials for avatar
                const displayName = user.displayName || user.email;
                const initials = displayName.split(' ').map(name => name.charAt(0)).join('').toUpperCase().slice(0, 2);
                
                // Update DOM elements
                userAvatar.textContent = initials;
                userName.textContent = user.displayName || 'No display name';
                userEmail.textContent = user.email;
                emailVerified.textContent = user.emailVerified ? 'Yes' : 'No';
                
                // Format dates
                const creationTime = user.metadata.creationTime;
                const lastSignInTime = user.metadata.lastSignInTime;
                
                createdAt.textContent = creationTime ? new Date(creationTime).toLocaleDateString() : 'Unknown';
                lastSignIn.textContent = lastSignInTime ? new Date(lastSignInTime).toLocaleDateString() : 'Unknown';
                
                // Show user info
                loading.style.display = 'none';
                errorMessage.style.display = 'none';
                noUser.style.display = 'none';
                userInfo.classList.add('show');
                
            } catch (error) {
                console.error('Error displaying user info:', error);
                showError('Failed to display user information: ' + error.message);
            }
        }

        // Listen for authentication state changes
        auth.onAuthStateChanged((user) => {
            if (user) {
                // User is signed in
                console.log('User is logged in:', user);
                displayUserInfo(user);
            } else {
                // No user is signed in
                console.log('No user is logged in');
                showNoUser();
            }
        }, (error) => {
            console.error('Authentication error:', error);
            showError('Authentication error: ' + error.message);
        });

        // Handle authentication errors
        auth.onIdTokenChanged((user) => {
            if (!user && auth.currentUser) {
                showError('Session expired. Please log in again.');
            }
        });
/* ... add this to the bottom of your existing <script> tag ... */

// Get a reference to the logout button
const logoutButton = document.getElementById('logoutButton');

// Add a click event listener to the button
logoutButton.addEventListener('click', () => {
    auth.signOut().then(() => {
        // Sign-out successful.
        console.log('User signed out successfully.');
        // Redirect to login page after logout
        window.location.href = 'index.html'; // Change 'login.html' to your actual login page
    }).catch((error) => {
        // An error happened.
        console.error('Sign out error:', error);
        alert('Error signing out: ' + error.message);
    });
    
});
        // Add a timeout for loading state
        setTimeout(() => {
            if (loading.style.display !== 'none') {
                showError('Timeout: Unable to load user information. Please check your Firebase configuration.');
            }
        }, 10000); // 10 second timeout
    </script>
</body>
</html>